var grsApp=angular.module("grsApp",[]),grsActiveCont;grsApp.service("GrsAdminService",["$window","$log","$sce",function(e,r,o){this.mode="pro",this.uploaderUrl=grsUploaderUrl,this.wpUploaderUrl=grsWpUploaderUrl,this.pluginUrl=grsPluginUrl,this.pluginVer=grsPluginVer,this.imagesDir=this.pluginUrl+"/images/",this.getViewsTemplateUrl=function(e){return o.trustAsResourceUrl(this.pluginUrl+"/admin/views/"+e+".html?ver="+this.pluginVer)},this.setTooltip=function(){jQuery(".grsGallFCont").tooltip({position:{my:"center bottom-6",at:"center top",using:function(e,r){jQuery(this).css(e),jQuery("<div>").addClass("arrow").appendTo(this).addClass(r.vertical).addClass(r.horizontal)}},show:{effect:"fadeIn",duration:20},hide:{effect:"fadeOut",duration:20}})},this.getWPImageSizes=function(e){var r=parseInt(e.width),o=parseInt(e.height),t=e.wp_sizes;if(null===t)return{medium:r>300||o>300?this.getRightSizeUrlForWp(300,r,o):"",large:r>1024||o>1024?this.getRightSizeUrlForWp(1024,r,o):"",full:""};e.wp_sizes="object"!=typeof t?JSON.parse(t):t;var a=void 0!==(t=e.wp_sizes).large?"-"+t.large.width+"x"+t.large.height:"";return{medium:void 0!==t.medium?"-"+t.medium.width+"x"+t.medium.height:a,large:a,full:""}},this.getRightSizeUrlForWp=function(e,r,o){return r>o?"-"+e+"x"+Math.round(e*o/r):"-"+Math.round(e*r/o)+"x"+e},this.getItemSrc=function(e){return this["itemSource_"+e.embed](e)},this.itemSource_=function(e){return this.uploaderUrl+e.path+"thumbnail/"+e.name+e.type},this.itemSource_wp=function(e){var r=this.getWPImageSizes(e);return this.wpUploaderUrl+e.path+e.name+r.medium+e.type},this.itemSource_instagram=function(e){return e.thumb_url},this.itemSource_youtube=function(e){return e.thumb_url},this.itemSource_vimeo=function(e){return e.thumb_url},this.itemSource_flickr=function(e){return e.thumb_url},this.log=function(e){"dev"==this.mode&&r.log(e)}}]),grsApp.factory("GrsAdminFactory",["$http","$q","GrsAdminService",function(e,r,o){return{embedMedia:function(t,a,n){var s={action:"grsGalleryAjax",grsAction:"embedMedia",grsAjaxNonce:grsAjaxNonce,provider:t,url:a,gallery:n};return e({method:"POST",url:grsAdminAjax,data:jQuery.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,o,t,a){return r.reject(e)}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})},saveGall:function(t,a){var n=0==t.id?"insert":"update",s={action:"grsGalleryAjax",grsAction:n,grsGallid:t.id,title:t.title,description:t.description,grsImages:JSON.stringify(a),grsAjaxNonce:grsAjaxNonce};return e({method:"POST",url:grsAdminAjax,data:jQuery.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,o,t,a){return e.grsAction=n,r.reject(e)}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})},saveOrder:function(t,a){var n={action:"grsGalleryAjax",grsAction:"saveOrder",grsAjaxNonce:grsAjaxNonce,gallery:t,items:a};return e({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,o,t,a){return r.reject(e)}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}}}]),grsApp.directive("toInt",function(){return{require:"ngModel",link:function(e,r,o,t){t.$parsers.push(function(e){return""+e}),t.$formatters.push(function(e){return parseInt(e)})}}}),grsApp.directive("validLink",["GrsAdminService",function(e){return{scope:{validLink:"="},link:function(r,o,t){r.link_=function(){return""==r.validLink.link?e.uploaderUrl+r.validLink.path+r.validLink.name+r.validLink.type:r.validLink.link},r.link_wp=function(){return""==r.validLink.link?e.wpUploaderUrl+r.validLink.path+r.validLink.name+r.validLink.type:r.validLink.link},r.link_youtube=function(){return""==r.validLink.link?r.validLink.path:r.validLink.link},r.link_instagram=function(){return r.link_youtube()},r.link_flickr=function(){return r.link_youtube()},r.link_vimeo=function(){return r.link_youtube()},r.validLink.link=r["link_"+r.validLink.embed]()}}}]),grsApp.directive("winclick",["$window",function(e){return{link:function(r){angular.element(e).on("click",function(e){r.$broadcast("winclick::winclick")})}}}]),grsApp.directive("draggable",["GrsAdminService",function(e){return{link:function(e,r){jQuery(r).sortable({start:function(r,o){r.stopPropagation(),e.oldPos=o.item.index(),o.item.addClass("forDrag")},stop:function(r,o){e.newPos=o.item.index(),o.item.removeClass("forDrag"),e.saveOrder(e.oldPos,e.newPos),e.$apply()},placeholder:"grsGallCoGaImC forDrop",delay:100,revert:400,tolerance:"pointer"}).disableSelection()}}}]),grsApp.controller("grsContent",["$scope","$filter","$log","$window","GrsAdminService",function(e,r,o,t,a){e.show=!1,e.showContPart="",e.config=grsConfig,e.grsSave=function(){void 0!==e["save"+e.showContPart]?e["save"+e.showContPart]():a.log("There is no method matching that name - save"+e.showContPart)},e.shThemes=function(r){return e.config.themes}}]),grsApp.directive("extSrc",["GrsAdminService",function(e){return{restrict:"A",scope:!0,link:function(e,r,o){var t=o.extSrc;t=t.replace(/'/g,"\\'"),r.attr("src",t)}}}]),grsApp.directive("grsPopup",["$filter","$http","$log","$timeout","GrsAdminService",function(e,r,o,t,a){return{restrict:"E",transclude:!0,scope:!1,templateUrl:a.getViewsTemplateUrl("grsPopup"),link:function(e,o,t){e.closePopup=function(){e.popupOptions.show=!1,e.popupOptions.showImg=!1,e.popupOptions.content={},e.popupOptions.comments=[]},e.isImage=function(){var r=e.popupOptions.content;return"video"!==r.type&&"link"!==r.type},e.isVideo=function(){return"video"===e.popupOptions.content.type},e.isLink=function(){return"link"===e.popupOptions.content.type},e.imgSrc=function(){var r=e.popupOptions.content;return""===r.embed?a.uploaderUrl+r.path+"/medium/"+r.name+r.type:"wp"===r.embed?a.wpUploaderUrl+r.path+r.name+a.getWPImageSizes(r).large+r.type:r.path},e.itemSrc=function(){return e.popupOptions.content.path},e.imgLoaded=function(r){e.popupOptions.showImg=!0},e.loadComments=function(o,t){var n={action:"grsGalleryAjax",grsAction:"showComments",id:o,gallId:t};r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,t,a){void 0===r.error&&(e.popupOptions.comments=r.success)}).error(function(e,r){a.log("errr"),401==r&&a.log(e)})},e.removeComments=function(o){var t=angular.element(jQuery(".grsGallHeader")).scope();if(t.grsLoading)t.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"removeComments",id:e.popupOptions.comments[o].id};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){t.grsLoading=!1,angular.isUndefined(r.error)&&e.popupOptions.comments.splice(o,1)}).error(function(e,r){a.log("errr"),401==r&&a.log(e)})}}}}}]),grsApp.directive("imageOnload",function(){return{restrict:"A",link:function(e,r,o){r.bind("load",function(){e.$apply(o.imageOnload)})}}}),grsApp.directive("grsGalleries",["$filter","$http","$log","$timeout","GrsAdminService","GrsAdminFactory",function(e,r,o,t,a,n){return{restrict:"E",transclude:!0,scope:!1,templateUrl:a.getViewsTemplateUrl("grsGalleries"),link:function(o,s,i){o.filteredItems=[],o.groupedItems=[],o.pageSize=8,o.itemsPerPage=o.pageSize,o.pagedItems=[],o.currentPage=0,o.order="order",o.reverse=!1,o.selGall={},o.items=[],o.embed={show:!1,type:"",url:"",examples:{instagram:["https://www.instagram.com/p/BIvjQDKAp-F"],youtube:["https://www.youtube.com/watch?v=Zi0RpNSELas"],vimeo:["https://vimeo.com/9058605"],flickr:["https://www.flickr.com/photos/luc-mechelen/23071249392"]}},o.saveOrder=function(e,r){var t=o.pageSize*o.currentPage+e,a=o.pageSize*o.currentPage+r,n=[];if(a<t)angular.forEach(o.items,function(e,r){r>=a&&r<t?e.order=r+1:r==t?(e.select=!1,e.order=a):e.order=r,n.push({id:e.id,order:e.order})}),o.itemsOrderToChange=n;else{if(!(a>t))return;angular.forEach(o.items,function(e,r){r>t&&r<=a?e.order=r-1:r==t?(e.select=!1,e.order=a):e.order=r,n.push({id:e.id,order:e.order})}),o.itemsOrderToChange=n}o.orderBy("order")},o.saveOrderDB=function(e){var r=angular.element(jQuery(".grsGallHeader")).scope();r.grsLoading?r.wmassage():(r.grsLoading=!0,n.saveOrder(o.selGall.id,e).then(function(e){r.grsLoading=!1,void 0===e.data.error?(r.grsMassage="Order successfully saved",r.grsMassageMood="success"):(r.grsMassage=e.data.error,r.grsMassageMood="error"),r.massage()},function(e){a.log(e)}))},o.getMinOrder=function(){return o.items.length>0?Math.min.apply(Math,o.items.map(function(e){return e.order})):1},o.popupOptions={show:!1,content:{}},o.showPopup=function(e,r){r.stopPropagation(),r.preventDefault(),angular.element(jQuery(".grsGallHeader")).scope().showGTs=!1,o.popupOptions.show=!0,o.popupOptions.content=o.pagedItems[o.currentPage][e],o.loadComments(o.pagedItems[o.currentPage][e].id,o.selGall.id)},o.getItemSrc=function(e){var r=o.pagedItems[o.currentPage][e];return a.getItemSrc(r)},o.getGallItems=function(){var t=angular.element(jQuery(".grsGallHeader")).scope(),n={action:"grsGalleryAjax",grsAction:"getGalleryItems",grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){if(t.grsLoading=!1,t.galleriesDataIsLoaded=!0,o.$$phase||o.$apply(),angular.isUndefined(r.error)){var i=r.success;i=e("filter")(i,function(e){return e.id=parseInt(e.id),!0}),o.galleriesData=e("orderBy")(i,"id",!0)}else t.grsMassage="Unable to get galleries data",t.grsMassageMood="error",t.massage()}).error(function(e,r){a.log("errr"),t.grsLoading=!1,t.grsMassage="Unable to get galleries data",t.grsMassageMood="error",t.massage(!1),401==r&&a.log(e)})},o.getGallItems(),String.prototype.trunc=String.prototype.trunc||function(e){return this.length>e?this.substr(0,e-1)+" ...":this.toString()},o.changeGallery=function(e,r){if(0==e)return o.selGall={id:0,title:"",description:"",pvIm:a.imagesDir+"thumbnail/grsnopv.png",imagesCount:0,images:[],prevImgPath:"",prevImgName:"grsnopv",prevImgType:".png"},o.items=[],void o.search();if(0==o.selGall.id&&(o.selGall.id=e,o.selGall.title=r,o.galleriesData.splice(0,0,o.selGall),o.galleriesData=angular.copy(o.galleriesData)),!angular.isUndefined(o.galleriesData)){for(var t=0;t<o.galleriesData.length;t++)if(o.galleriesData[t].id==e){o.selGall=o.galleriesData[t],o.selGall.pvIm=("grsnopv"===o.selGall.prevImgName?a.imagesDir:a.uploaderUrl)+o.selGall.prevImgPath+"thumbnail/"+o.selGall.prevImgName+o.selGall.prevImgType,o.items=o.selGall.images,angular.isUndefined(o.itemsOrderToChange)||delete o.itemsOrderToChange;break}o.search()}},o.saveGall=function(){var e=angular.element(jQuery(".grsGallHeader")).scope();e.grsLoading?e.wmassage():(e.grsLoading=!0,n.saveGall(o.selGall,o.pagedItems[o.currentPage]).then(function(r,t){if(e.grsLoading=!1,a.log(r),void 0===r.data.error){var n=r.data.success;"insert"==r.data.grsAction?(o.changeGallery(n.id,n.title),e.addItem(n.title,"",n.id)):(o.selGall.title=n.title,e.updateItem(n.title),o.updateAlbsContents(n.id,n.title,"gal")),o.galleriesData=angular.copy(o.galleriesData),e.grsMassage="Items successfully saved",e.grsMassageMood="success",void 0!==o.itemsOrderToChange&&(o.saveOrderDB(o.itemsOrderToChange),delete o.itemsOrderToChange)}else e.grsMassage=""==r.data.error?"Error something went wrong":r.data.error,e.grsMassageMood="error";e.massage()},function(e){a.log(e)}))},o.enableWPMedia=function(){o.addImagesFromWPMedia=wp.media.frames.file_frame=wp.media({title:"Add image to gallery",button:{text:"Add"},multiple:"add",toolbar:"select",library:{type:"image"}}),o.addImagesFromWPMedia.on("select",function(){var e=[];o.addImagesFromWPMedia.state().get("selection").map(function(r){e.push(r.toJSON())}),o.callbackForWPMediaAddImages(e)})},o.enableWPMedia(),o.callbackForWPMediaAddImages=function(e){var t=angular.element(jQuery(".grsGallHeader")).scope();if(t.grsLoading)t.wmassage();else{a.log(e);var n=o.getMinOrder(),s=o.selGall.imagesCount?parseInt(o.selGall.imagesCount):0,i=[];angular.forEach(e,function(e){s++,n--,a.log(e);var r=e.filename.split("."),t="."+r.pop(),l=e.url.split(a.wpUploaderUrl)[1].split(e.filename),g=o.getWpImageSizesJSON(e.sizes,e.width,e.height);r.splice(r.length);var c={name:r.join("."),title:e.title,description:e.description,path:l[0],type:t,order:n,key:s,width:e.width,height:e.height,wp_sizes:g};a.log(c),i.push(c)}),a.log(i),o.selGall.imagesCount=s;var l={action:"grsGalleryAjax",grsAction:"addImagesFromWP",grsId:o.selGall.id,files:i,grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(l),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,r,s,l){if(a.log(e),t.grsLoading=!1,"success"===Object.keys(e)[0]){t.grsMassage="Images successfully added";for(var g=e.success,c=0;c<i.length;c++)a.log("id - "+g[c]),o.addItem(i[c].name,i[c].title,i[c].description,i[c].path,"",n,i[c].type,"wp","",i[c].key,g[c],i[c].width,i[c].height,i[c].wp_sizes);t.grsMassageMood="success"}else t.grsMassage=e.error,t.grsMassageMood="error";t.massage()}).error(function(e,r){a.log("errr"),401==r&&a.log(e)})}},o.getWpImageSizesJSON=function(e,r,o){function t(r){a[r]={};var o=e[r].url.split("-").pop().split(".")[0].split("x");a[r].width=o[0],a[r].height=o[1]}var a={};return a.full={width:r,height:o},angular.isUndefined(e.thumbnail)||t("thumbnail"),angular.isUndefined(e.medium)||t("medium"),angular.isUndefined(e.large)||t("large"),a},o.addImagesFromWP=function(){o.addImagesFromWPMedia.open()},o.addImages=function(){var e=angular.element(jQuery(".grsGallUpl")).scope(),r=angular.element(jQuery(".grsGallHeader")).scope();e.options.show||r.selectTab("Upl"),e.options.addImages||(e.options.addAction="addImages",e.options.addImages=!0,e.options.addImageTitle="Add")},o.addGPvIm=function(e,r,t){o.selGall.prevImgName=r,o.selGall.prevImgPath=e,o.selGall.prevImgType=t,o.selGall.pvIm=a.uploaderUrl+e+"thumbnail/"+r+t,o.selGall.hidePvIm=!0},o.activeGPw=function(){var e=angular.element(jQuery(".grsGallUpl")).scope(),r=angular.element(jQuery(".grsGallHeader")).scope();e.options.show||r.selectTab("Upl"),e.options.addImages&&(e.options.addAction="addGPvIm",e.options.addImages=!1,e.options.addImageTitle="Add gallery preview image")},o.deleteGallery=function(e,r){void 0!==r&&r.stopPropagation();for(var t=0;t<o.galleriesData.length;t++)o.galleriesData[t].id==e&&(o.galleriesData.splice(t,1),o.galleriesData=angular.copy(o.galleriesData),o.selGall.id==e&&(o.selGall={id:"",title:"",description:"",pvIm:a.imagesDir+"thumbnail/grsnopv.png",imagesCount:0,images:[],prevImgPath:"",prevImgName:"grsnopv",prevImgType:".png"},o.items=[],o.search()));o.delAlbsContsFromPrnt(e,"gal")},o.addItem=function(e,r,t,a,n,s,i,l,g,c,u,d,m,p){o.pageSize++,o.itemsPerPage=o.pageSize,o.firstPage(),u=u||c;var f=""===l;o.items.splice(0,0,{name:e,title:r,description:t,path:a,link:n,order:s,type:i,embed:l,thumb_url:g,publish:1,key:c,id:u,hide:f,width:d,height:m,wp_sizes:p}),o.search()},o.addIdsToScopes=function(e,r){for(var t=0;t<e.length;t++)for(var a=o.pagedItems[o.currentPage].length-1;a>=0;a--)o.pagedItems[o.currentPage][a].key===e[t]&&(o.pagedItems[o.currentPage][a].id=r[t])},o.grsDeleteGImgPr=function(e,r){void 0!==e&&e.stopPropagation();var t=angular.element(jQuery(".grsGallConfirmMC")).scope(),a=jQuery(e.target).offset().left-jQuery(".grsGallFCont").offset().left,n=jQuery(e.target).offset().top-jQuery(".grsGallFCont").offset().top;t.options.left=a,t.options.top=n+25,t.options.actCnt=".grsGallContent","grsGallCoGaImDatAcDb"==e.target.className?(t.options.grsConMess="Are you sure , you want to delete ",t.options.grsConIt=o.pagedItems[o.currentPage][r].title,t.options.grsConTp=" item ?",t.options.actF="deleteImage",t.options.actP.push(r)):(t.options.grsConMess="Are you sure , you want to delete selected items ?",t.options.grsConIt="",t.options.grsConTp="",t.options.actF="deleteItems",t.options.actP.push("")),t.options.show=!0},o.deleteImage=function(e){var n=angular.element(jQuery(".grsGallHeader")).scope();if(n.grsLoading)n.wmassage();else{var s=o.pagedItems[o.currentPage][e].id,i=o.itemsPerPage*o.currentPage+parseInt(e);grsAction="deleteImage",data={action:"grsGalleryAjax",grsAction:grsAction,id:s,grsAjaxNonce:grsAjaxNonce},n.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(data),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,s,l){n.grsLoading=!1,void 0===r.error?(o.pagedItems[o.currentPage][e].delete=!0,t(function(){o.items.splice(i,1),o.search()},500),n.grsMassage="Items successfully deleted",n.grsMassageMood="success"):(n.grsMassage=""==r.error?"Error something went wrong":r.error,n.grsMassageMood="error"),n.massage()}).error(function(e,r){a.log("errr"),401==r&&a.log(e)})}},o.deleteItems=function(){var e=angular.element(jQuery(".grsGallHeader")).scope();if(e.grsLoading)e.wmassage();else{for(var n=o.pagedItems[o.currentPage],s=[],i=[],l=0;l<n.length;l++)if(n[l].select){o.itemsPerPage,o.currentPage,parseInt(l);s.push(n[l].id),i.push(n[l])}var g={action:"grsGalleryAjax",grsAction:"deleteImages",ids:s,grsAjaxNonce:grsAjaxNonce};e.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(g),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,l){if(e.grsLoading=!1,void 0===r.error){for(var g=0;g<i.length;g++)i[g].delete=!0;t(function(){for(var e=0;e<o.items.length;e++)for(var r=0;r<s.length;r++)o.items[e].id==s[r]&&o.items.splice(e,1);o.search()},500),e.grsMassage="Items successfully deleted",e.grsMassageMood="success"}else e.grsMassage=""==r.error?"Error something went wrong":r.error,e.grsMassageMood="error";e.massage()}).error(function(e,r){a.log("errr"),401==r&&a.log(e)})}},o.selectItem=function(e){o.pagedItems[o.currentPage][e].select=!o.pagedItems[o.currentPage][e].select},o.selectItems=function(e){e.preventDefault();var r=o.pagedItems[o.currentPage],t=!1;if(void 0!==r){for(a=0;a<r.length;a++)if(void 0===r[a].select||!r[a].select){t=!0;break}for(var a=0;a<r.length;a++)r[a].select=t}},o.showItemInfo=function(e,r){r.stopPropagation(),o.pagedItems[o.currentPage][e].info=!o.pagedItems[o.currentPage][e].info},o.shEmCont=function(){return o.embed.show},o.showEmbedMedia=function(e){o.embed.show=!0,o.embed.type=e},o.closeEmbedMedia=function(){var e=o.embed;e.show=!1,e.type="",e.url=""},o.addEmbedMedia=function(){var e=o.embed,r=e.url,t=e.type,s=angular.element(jQuery(".grsGallHeader")).scope();if(""==r)return s.grsMassage="Fill the url input",s.grsMassageMood="error",void s.massage();s.grsLoading=!0,n.embedMedia(t,r,o.selGall.id).then(function(r){if(s.grsLoading=!1,a.log(r),void 0===r.data.error){var t=r.data.success;o.addItem("",t.title,t.description,t.path,t.link,t.order,t.type,t.embed,t.thumb_url,t.id,null),s.grsMassage="Item successfully saved",s.grsMassageMood="success",o.closeEmbedMedia()}else e.url="",s.grsMassage=r.data.error,s.grsMassageMood="error";s.massage()},function(e){a.log(e)})},o.orderBy=function(r,t){void 0!==t?(t.preventDefault(),o.reverse=r==o.order&&!o.reverse):o.reverse=!1,o.order=r,o.items=e("orderBy")(o.items,o.order,o.reverse),o.search(!0)},o.changeItemsPerPage=function(){o.pageSize=void 0===o.pageSize||null==o.pageSize?1:o.pageSize,o.itemsPerPage=o.pageSize,o.search()};var l=function(e,r){return!r||-1!==e.toLowerCase().indexOf(r.toLowerCase())};o.search=function(r){o.filteredItems=e("filter")(o.items,function(e){for(var r in e)if(e.id=parseInt(e.id),e.order=parseInt(e.order),"title"==r&&l(e[r],o.query))return!0;return!1}),r||(o.currentPage=0),o.groupToPages()},o.groupToPages=function(){o.pagedItems=[];for(var e=0;e<o.filteredItems.length;e++)e%o.itemsPerPage==0?o.pagedItems[Math.floor(e/o.itemsPerPage)]=[o.filteredItems[e]]:o.pagedItems[Math.floor(e/o.itemsPerPage)].push(o.filteredItems[e])},o.range=function(e,r){var o=[];r||(r=e,e=0);for(var t=e;t<r;t++)o.push(t);return o},o.prevPage=function(){o.currentPage>0&&o.currentPage--},o.nextPage=function(){o.currentPage<o.pagedItems.length-1&&o.currentPage++},o.lastPage=function(){o.currentPage<o.pagedItems.length-1&&(o.currentPage=o.pagedItems.length-1)},o.firstPage=function(){o.currentPage>0&&(o.currentPage=0)},o.setPage=function(){o.currentPage=this.n}}}}]),grsApp.directive("grsThemes",["$filter","$http","$timeout","GrsAdminService",function(e,r,o,t){return{restrict:"E",transclude:!0,scope:!1,template:'<div ng-if="shThemes()" onload="themeContLoaded()" ng-include="options.themeUrl"></div>',link:function(e,o,a){e.pluginUrl=t.pluginUrl,e.grsSelectedTheme={thumbnail:{},film:{},masonry:{},mosaic:{},navigation:{},lightbox:{}},e.options={themeUrl:t.getViewsTemplateUrl("grsThemes"),view:"Thumbnail",lightboxMain:!1,lightboxCloseButton:!1,lightboxTitle:!1,lightboxTitleCont:!1,lightboxOnlyDesc:!1,lightboxOnlyTitle:!1,lightboxImageCo:!1,lightboxNav:!1,lightboxFilm:!1,lightboxFilmCont:!1,lightboxFilmNav:!1,lightboxContButt:!1,lightboxContButtCont:!1,lightboxContButtButts:!1,lightboxComm:!1,lightboxCommCont:!1,lightboxCommLabels:!1,lightboxCommInp:!1,lightboxCommCButt:!1,lightboxCommCpButt:!1,lightboxCommAuth:!1,lightboxCommText:!1,lightboxCommDate:!1,thumbnailImg:!1,thumbnailTitle:!1,masonryImg:!1,masonryTitle:!1,mosaicImg:!1,mosaicTitle:!1,navMainCont:!1,navButtons:!1,navBackButton:!1,navIconsHide:!0,filmNavIconsHide:!0,contIconsHide:!0,fmNavIcons:!1,fmNavIconsHide:!0},e.showHideParts=function(r){e.options[r]=!e.options[r]},e.showNavButtsV=[{value:"no",name:"No",class:"noneOp"},{value:"onhover",name:"On hover",class:""},{value:"always",name:"Always",class:""}],e.nBEffects=[{value:"no",name:"No effect",class:"noneOp"},{value:"fade",name:"Fade",class:""},{value:"slideIn",name:"Slide In",class:""},{value:"rotateIn",name:"Rotate In",class:""}],e.navButtShButtsCh=function(){e.grsSelectedTheme.showNavBuutEff="onhover"===e.grsSelectedTheme.lightbox.navButtShButts},e.navButtShButtsCh=function(){e.grsSelectedTheme.showNavBuutEff="onhover"===e.grsSelectedTheme.lightbox.navButtShButts},e.ftSEffects=[{value:"no",name:"No effect",class:"noneOp"},{value:"fadeIn",name:"Fade In",class:""},{value:"fadeOut",name:"Fade Out",class:""},{value:"zoom",name:"Zoom",class:""},{value:"rotate",name:"Rotate",class:""},{value:"border",name:"Border",class:""}],e.hoverEffects=[{value:"none",name:"None",class:"noneOp"},{value:"scaleIm",name:"Zoom(image)",class:""},{value:"scaleRotIm",name:"Zoom + rotate(image)",class:""},{value:"scaleTransIm",name:"Zoom + translate(image)",class:""},{value:"scale",name:"Zoom",class:""},{value:"rotate",name:"Rotate",class:""},{value:"grayscale",name:"Gray",class:""},{value:"sepia",name:"Sepia",class:""},{value:"flash",name:"Flash",class:""},{value:"blur",name:"Blur + grayscale",class:""},{value:"shine",name:"Shine",class:""},{value:"circle",name:"Circle",class:""}],e.borderStyles=[{value:"none",name:"None"},{value:"hidden",name:"Hidden"},{value:"dotted",name:"Dotted"},{value:"dashed",name:"Dashed"},{value:"solid",name:"Solid"},{value:"double",name:"Double"},{value:"groove",name:"Groove"},{value:"ridge",name:"Ridge"},{value:"inset",name:"Inset"},{value:"outset",name:"Outset"},{value:"initial",name:"Initial"}],e.fontFamilies=[{value:"cursive",name:"Cursive",class:""},{value:"fantasy",name:"Fantasy",class:""},{value:"inherit",name:"Inherit",class:""},{value:"monospace",name:"Monospace",class:""},{value:"sans-serif",name:"Sans-serif",class:""},{value:"serif",name:"Serif",class:""},{value:"Georgia",name:"Georgia",class:""},{value:"Architex",name:"Architex",class:""},{value:"Peterbuilt",name:"Peterbuilt",class:""},{value:"Max",name:"Max",class:""},{value:"WIREDsaji",name:"WIREDsaji",class:""},{value:"CoventryGardenNF",name:"CoventryGardenNF",class:""},{value:"Femkeklaver",name:"Femkeklaver",class:""},{value:"Caeldera",name:"Caeldera",class:""}],e.fontWeights=[{value:"100",name:"100",class:""},{value:"200",name:"200",class:""},{value:"300",name:"300",class:""},{value:"400",name:"400",class:""},{value:"500",name:"500",class:""},{value:"600",name:"600",class:""},{value:"700",name:"700",class:""},{value:"800",name:"800",class:""},{value:"900",name:"900",class:""},{value:"bold",name:"Bold",class:""},{value:"bolder",name:"Bolder",class:""},{value:"inherit",name:"Inherit",class:""},{value:"initial",name:"Initial",class:""},{value:"lighter",name:"Lighter",class:""},{value:"normal",name:"Normal",class:""}],e.fontStyles=[{value:"italic",name:"Italic",class:""},{value:"inherit",name:"Inherit",class:""},{value:"normal",name:"Normal",class:""},{value:"oblique",name:"Oblique",class:""}],e.tPoss=[{value:"top",name:"Top",class:""},{value:"middle",name:"Middle",class:""},{value:"bottom",name:"Bottom",class:""}],e.align=[{value:"left",name:"Left",class:""},{value:"center",name:"Center",class:""},{value:"right",name:"Right",class:""}],e.tEffects=[{value:"no",name:"No effect",class:"noneOp"},{value:"grsFadeIn",name:"Fade in",class:""},{value:"grsSlideInLeft",name:"Slide in left",class:""},{value:"grsSlideInRight",name:"Slide in right",class:""},{value:"grsSlideInUp",name:"Slide in up",class:""},{value:"grsSlideInDown",name:"Slide in down",class:""},{value:"grsZoomIn",name:"Zoom In",class:""},{value:"grsTransUp",name:"Translate up",class:""},{value:"grsRotateX",name:"Rotate x",class:""},{value:"grsRotateY",name:"Rotate y",class:""},{value:"grsBounceIn",name:"Bounce in",class:""},{value:"grsBounceInDown",name:"Bounce in down",class:""},{value:"grsBounceInLeft",name:"Bounce in left",class:""},{value:"grsFlipInX",name:"Flip in x",class:""},{value:"grsFlipInY",name:"Flip in y",class:""},{value:"grsRollIn",name:"Roll in",class:""},{value:"mask",name:"Mask",class:""}],e.contButtOnhovers=[{value:"0",name:"Active"},{value:"1",name:"Passvie"},{value:"2",name:"Same"}],e.gradientDirections=[{value:"180deg",name:"From top to bottom"},{value:"0deg",name:"From bottom to top"},{value:"90deg",name:"From left to right"},{value:"-90deg",name:"From right to left"}],e.positionTypes=[{value:"topRight",name:"Top right"},{value:"topCenter",name:"Top center"},{value:"topLeft",name:"Top left"},{value:"bottomLeft",name:"Bottom left"},{value:"bottomCenter",name:"Bottom center"},{value:"bottomRight",name:"Bottom right"},{value:"center",name:"Center"}],e.getThemeItems=function(){var o=angular.element(jQuery(".grsGallHeader")).scope(),a={action:"grsGalleryAjax",grsAction:"getThemeItems",grsAjaxNonce:grsAjaxNonce};o.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){if(o.grsLoading=!1,t.log(r),void 0===r.error){e.grsThemes=r.success.grsThemes,e.newTheme=r.success.newTheme;for(var i=0;i<e.grsThemes.length;i++)if(1==e.grsThemes[i].default){e.grsChangeTheme(i);break}}else o.grsMassage=""==r.error?"Unable to get themes data":r.error,o.grsMassageMood="error",o.massage()}).error(function(e,r){t.log("errr"),o.grsLoading=!1,o.grsMassage="Unable to get themes data",o.grsMassageMood="error",o.massage(!1),401==r&&t.log(e)})},e.getThemeItems(),e.themeContLoaded=function(){o.find(".thumbnailTBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".thumbnailTcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".thumbnailMaskColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".thumbnailBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".thumbnailBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".thumbnailBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmThumbBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmThumbBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmThumbBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavHoverBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmNavBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmTBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".fmTcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".masonryBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".masonryBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".masonryBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".masonryTBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".masonryTcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".mosaicBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".mosaicBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".mosaicBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".mosaicTBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".mosaicTcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".bgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".boxBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".closeButtBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".closeButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".closeButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".closeButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".closeButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".titleDescpBgGrFrColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".titleDescpBgGrToColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".titleDescpTColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".titleDescpDColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".titleDescpshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".imgcoBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".imgcoColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".imgcoshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtShadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtHoverShadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".navButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmstripBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmThumbBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmThumbBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmSelThumbBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmThumbBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavHoverBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".filmNavBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtContBgGrFrColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtContBgGrToColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtContBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtHoverBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtShadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".contButtContBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commContBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commFontColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commButtBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commButtHBgcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpAcBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commInpAcBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commClButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commClButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commClButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commClButtBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commClButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commCpButtBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commCpButtBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commCpButtColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commCpButtHoverColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commCpButtBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commAFontColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commTFontColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".commDFontColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBHBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBABgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".pnavBcolor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".backBoxshadowColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".backBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".backHBgColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".backColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")}),o.find(".backBorderColor").colorpicker({format:"rgba"}).on("changeColor.colorpicker",function(e){jQuery(this).find("input").trigger("input")})},e.grsChangeTheme=function(r){e.grsSelectedTheme=e.grsThemes[r],e.navButtShButtsCh(),o.find(".thumbnailTBgcolor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailTBgcolor),o.find(".thumbnailTcolor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailTcolor),o.find(".thumbnailMaskColor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailMaskColor),o.find(".thumbnailBorderColor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailBorderColor),o.find(".thumbnailBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailBoxshadowColor),o.find(".thumbnailBgColor").colorpicker("setValue",e.grsSelectedTheme.thumbnail.thumbnailBgColor),o.find(".masonryBorderColor").colorpicker("setValue",e.grsSelectedTheme.masonry.masonryBorderColor),o.find(".masonryBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.masonry.masonryBoxshadowColor),o.find(".masonryBgColor").colorpicker("setValue",e.grsSelectedTheme.masonry.masonryBgColor),o.find(".masonryTBgcolor").colorpicker("setValue",e.grsSelectedTheme.masonry.masonryTBgcolor),o.find(".masonryTcolor").colorpicker("setValue",e.grsSelectedTheme.masonry.masonryTcolor),o.find(".fmBgColor").colorpicker("setValue",e.grsSelectedTheme.film.fmBgColor),o.find(".fmThumbBorderColor").colorpicker("setValue",e.grsSelectedTheme.film.fmThumbBorderColor),o.find(".fmThumbBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.film.fmThumbBoxshadowColor),o.find(".fmThumbBgColor").colorpicker("setValue",e.grsSelectedTheme.film.fmThumbBgColor),o.find(".fmNavBgColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavBgColor),o.find(".fmNavHoverBgColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavHoverBgColor),o.find(".fmNavColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavColor),o.find(".fmNavHoverColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavHoverColor),o.find(".fmNavBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavBoxshadowColor),o.find(".fmNavBorderColor").colorpicker("setValue",e.grsSelectedTheme.film.fmNavBorderColor),o.find(".fmTBgcolor").colorpicker("setValue",e.grsSelectedTheme.film.fmTBgcolor),o.find(".fmTcolor").colorpicker("setValue",e.grsSelectedTheme.film.fmTcolor),o.find(".mosaicBorderColor").colorpicker("setValue",e.grsSelectedTheme.mosaic.mosaicBorderColor),o.find(".mosaicBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.mosaic.mosaicBoxshadowColor),o.find(".mosaicBgColor").colorpicker("setValue",e.grsSelectedTheme.mosaic.mosaicBgColor),o.find(".mosaicTBgcolor").colorpicker("setValue",e.grsSelectedTheme.mosaic.mosaicTBgcolor),o.find(".mosaicTcolor").colorpicker("setValue",e.grsSelectedTheme.mosaic.mosaicTcolor),o.find(".pnavBBorderColor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBBorderColor),o.find(".pnavBBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBBoxshadowColor),o.find(".pnavBBgColor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBBgColor),o.find(".pnavBHBgColor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBHBgColor),o.find(".pnavBABgColor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBABgColor),o.find(".pnavBcolor").colorpicker("setValue",e.grsSelectedTheme.navigation.pnavBcolor),o.find(".backBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.navigation.backBoxshadowColor),o.find(".backBgColor").colorpicker("setValue",e.grsSelectedTheme.navigation.backBgColor),o.find(".backHBgColor").colorpicker("setValue",e.grsSelectedTheme.navigation.backHBgColor),o.find(".backColor").colorpicker("setValue",e.grsSelectedTheme.navigation.backColor),o.find(".backBorderColor").colorpicker("setValue",e.grsSelectedTheme.navigation.backBorderColor),o.find(".bgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.bgColor),o.find(".boxBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.boxBgColor),o.find(".closeButtBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.closeButtBgColor),o.find(".closeButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.closeButtColor),o.find(".closeButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.closeButtHoverColor),o.find(".closeButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.closeButtBoxshadowColor),o.find(".closeButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.closeButtBorderColor),o.find(".titleDescpBgGrFrColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.titleDescpBgGrFrColor),o.find(".titleDescpBgGrToColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.titleDescpBgGrToColor),o.find(".titleDescpTColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.titleDescpTColor),o.find(".titleDescpDColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.titleDescpDColor),o.find(".titleDescpshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.titleDescpshadowColor),o.find(".imgcoBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.imgcoBgColor),o.find(".imgcoColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.imgcoColor),o.find(".imgcoshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.imgcoshadowColor),o.find(".navButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtColor),o.find(".navButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtHoverColor),o.find(".navButtBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtBgColor),o.find(".navButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtBoxshadowColor),o.find(".navButtShadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtShadowColor),o.find(".navButtHoverShadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtHoverShadowColor),o.find(".navButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.navButtBorderColor),o.find(".filmstripBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmstripBgColor),o.find(".filmThumbBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmThumbBorderColor),o.find(".filmThumbBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmThumbBoxshadowColor),o.find(".filmSelThumbBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmSelThumbBorderColor),o.find(".filmThumbBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmThumbBgColor),o.find(".filmNavBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavBgColor),o.find(".filmNavHoverBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavHoverBgColor),o.find(".filmNavButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavButtColor),o.find(".filmNavButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavButtHoverColor),o.find(".filmNavBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavBoxshadowColor),o.find(".filmNavBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.filmNavBorderColor),o.find(".contButtContBgGrFrColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtContBgGrFrColor),o.find(".contButtContBgGrToColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtContBgGrToColor),o.find(".contButtContBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtContBoxshadowColor),o.find(".contButtBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtBgColor),o.find(".contButtHoverBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtHoverBgColor),o.find(".contButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtColor),o.find(".contButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtHoverColor),o.find(".contButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtBoxshadowColor),o.find(".contButtShadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtShadowColor),o.find(".contButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtBorderColor),o.find(".contButtContBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.contButtContBorderColor),o.find(".commContBgcolor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commContBgcolor),o.find(".commFontColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commFontColor),o.find(".commButtBgcolor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commButtBgcolor),o.find(".commButtHBgcolor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commButtHBgcolor),o.find(".commButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commButtBoxshadowColor),o.find(".commInpColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpColor),o.find(".commInpBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpBoxshadowColor),o.find(".commInpBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpBorderColor),o.find(".commInpBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpBgColor),o.find(".commInpAcBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpAcBorderColor),o.find(".commInpAcBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commInpAcBoxshadowColor),o.find(".commButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commButtColor),o.find(".commButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commButtBorderColor),o.find(".commClButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commClButtBoxshadowColor),o.find(".commClButtBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commClButtBgColor),o.find(".commClButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commClButtBorderColor),o.find(".commClButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commClButtColor),o.find(".commClButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commClButtHoverColor),o.find(".commCpButtBoxshadowColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commCpButtBoxshadowColor),o.find(".commCpButtBgColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commCpButtBgColor),o.find(".commCpButtColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commCpButtColor),o.find(".commCpButtHoverColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commCpButtHoverColor),o.find(".commCpButtBorderColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commCpButtBorderColor),o.find(".commAFontColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commAFontColor),o.find(".commTFontColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commTFontColor),o.find(".commDFontColor").colorpicker("setValue",e.grsSelectedTheme.lightbox.commDFontColor)},e.grsAddTheme=function(){var o=angular.element(jQuery(".grsGallHeader")).scope();if(o.grsLoading)o.wmassage();else{var a={action:"grsGalleryAjax",grsAction:"addTheme",grsAjaxNonce:grsAjaxNonce};o.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){o.grsLoading=!1,t.log(r),void 0===r.error?(e.grsThemes.push(r.success),e.grsChangeTheme(e.grsThemes.length-1),o.grsMassage="Theme successfully saved",o.grsMassageMood="success"):(o.grsMassage="Error something went wrong",o.grsMassageMood="error"),o.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},e.saveTheme=function(){var o=angular.element(jQuery(".grsGallHeader")).scope();if(o.grsLoading)o.wmassage();else{var a={action:"grsGalleryAjax",grsAction:"updateTheme",theme:e.grsSelectedTheme,grsAjaxNonce:grsAjaxNonce};o.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){o.grsLoading=!1,t.log(r),void 0===r.error?(e.grsSelectedTheme.name=r.success[0],o.grsMassage="Theme successfully saved",o.grsMassageMood="success"):(o.grsMassage=""==r.error?"Error something went wrong":r.error,o.grsMassageMood="error"),o.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},e.grsDeleteThemePr=function(r,o){void 0!==r&&r.stopPropagation();var t=e.grsThemes[o].default,a=angular.element(jQuery(".grsGallHeader")).scope();if(1==t)return a.grsMassage="You cant delete default theme",a.grsMassageMood="error",void a.massage();var n=angular.element(jQuery(".grsGallConfirmMC")).scope(),s=jQuery(r.target).offset().left-jQuery(".grsGallFCont").offset().left,i=jQuery(r.target).offset().top-jQuery(".grsGallFCont").offset().top;n.options.show=!0,n.options.left=s,n.options.top=i+25,n.options.grsConMess="Are you sure , you want to delete ",n.options.grsConIt=e.grsThemes[o].name,n.options.grsConTp=" theme ?",n.options.actCnt=".grsGallContent",n.options.actF="grsDeleteTheme",n.options.actP.push(o)},e.grsDeleteTheme=function(o){var a=angular.element(jQuery(".grsGallHeader")).scope();if(a.grsLoading)a.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"deleteTheme",id:e.grsThemes[o].id,grsAjaxNonce:grsAjaxNonce};a.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,t,n,s){if(a.grsLoading=!1,void 0===r.error){if(e.grsSelectedTheme.id==e.grsThemes[o].id)for(var i=0;i<e.grsThemes.length;i++)1==e.grsThemes[i].default&&e.grsChangeTheme(i);e.grsThemes.splice(o,1),a.grsMassage="Theme successfully deleted",a.grsMassageMood="success"}else a.grsMassage=""==r.error?"Error something went wrong":r.error,a.grsMassageMood="error";a.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},e.default=function(o){var a=angular.element(jQuery(".grsGallHeader")).scope();if(a.grsLoading)a.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"setDefault",id:e.grsThemes[o].id,grsAjaxNonce:grsAjaxNonce};1!=e.grsThemes[o].default&&(a.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,t,n,s){if(a.grsLoading=!1,void 0===r.error){for(var i=0;i<e.grsThemes.length;i++)if(1==e.grsThemes[i].default){e.grsThemes[i].default=0;break}e.grsThemes[o].default=1,a.grsMassage="Theme successfully saved",a.grsMassageMood="success"}else a.grsMassage=""==r.error?"Error something went wrong":r.error,a.grsMassageMood="error";a.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)}))}},e.grsThemeView=function(r){e.options.view=r}}}}]),grsApp.directive("grsAlbums",["$filter","$http","GrsAdminService",function(e,r,o){return{restrict:"E",transclude:!0,scope:!1,templateUrl:o.getViewsTemplateUrl("grsAlbums"),link:function(e,t,a){e.grsAlbums=[],e.grsGalleriesForAlb=[],e.showGallsForAdd=!1,e.showAlbsForAdd=!1,e.grsAlbAction="",e.pageination={items:[],currentPage:0,itemsPerPage:5},e.$watch("galleriesData",function(){e.grsGalleriesForAlb=angular.copy(e.galleriesData),e.$$phase||e.$apply()}),e.getAlbItems=function(){var t=angular.element(jQuery(".grsGallHeader")).scope(),a={action:"grsGalleryAjax",grsAction:"getAlbumItems",grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,a,n){t.grsLoading=!1,void 0===r.error?e.grsAlbums=r.success:(t.grsMassage="Unable to get albums data",t.grsMassageMood="error",t.massage())}).error(function(e,r){o.log("errr"),t.grsLoading=!1,t.grsMassage="Unable to get albums data",t.grsMassageMood="error",t.massage(!1),401==r&&o.log(e)})},e.getAlbItems(),e.contForAdd=function(r){e.selAlbExists()&&("gall"==r?e.showGallsForAdd=!e.showGallsForAdd:"alb"==r&&(e.showAlbsForAdd=!e.showAlbsForAdd))},e.$watch("grsAlbums",function(){switch(e.pageination.items=angular.copy(e.grsAlbums),void 0!==e.pageination.search&&e.pageination.search(),e.grsAlbAction){case"addAlbum":e.pageination.firstPage(),e.grsChangeAlbum(0);break;case"updateAlbum":for(o=0;o<e.pageination.pagedItems.length;o++)for(r=0;r<e.pageination.pagedItems[o].length;r++)if(e.pageination.pagedItems[o][r].id==e.grsSelectedAlbum.id){e.pageination.currentPage=o;break}break;case"deleteAlbum":case"deleteAlbContent":if(void 0===e.grsSelectedAlbum)return;for(o=0;o<e.pageination.pagedItems.length;o++)for(var r=0;r<e.pageination.pagedItems[o].length;r++)if(e.pageination.pagedItems[o][r].id==e.grsSelectedAlbum.id){e.grsSelectedAlbum.content=e.pageination.pagedItems[o][r].content;break}break;case"addAlbContent":for(var o=0;o<e.grsAlbums.length;o++)if(e.grsAlbums[o].id==e.grsSelectedAlbum.id){e.grsAlbums[o].content=e.grsSelectedAlbum.content;break}e.pageination.items=angular.copy(e.grsAlbums),e.pageination.search();break;default:return}e.grsAlbAction="",e.$$phase||e.$apply()}),e.$watch("pageination.currentPage",function(){e.isAllChecked=!1,e.checkAll()}),e.checkAll=function(){var r=e.isAllChecked,o=e.pageination;o.pagedItems&&angular.forEach(o.pagedItems[o.currentPage],function(e){e.checked=r})},e.checked=function(){var r=e.pageination;e.isAllChecked=r.pagedItems[r.currentPage].every(function(e){return e.checked})},e.grsChangeAlbum=function(r){e.grsSelectedAlbum=e.pageination.pagedItems[e.pageination.currentPage][r];var t="grsnopv"==e.grsSelectedAlbum.prevImgName?o.imagesDir:o.uploaderUrl;e.grsSelectedAlbum.pvAlbIm=t+e.grsSelectedAlbum.prevImgPath+"thumbnail/"+e.grsSelectedAlbum.prevImgName+e.grsSelectedAlbum.prevImgType},e.grsAddAlbum=function(){var t=angular.element(jQuery(".grsGallHeader")).scope();if(t.grsLoading)t.wmassage();else{var a={action:"grsGalleryAjax",grsAction:"addUpdateAlbum",grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){if(o.log(r),t.grsLoading=!1,void 0===r.error){var i={id:r.success[0],title:r.success[1],description:"",content:[],prevImgPath:"",prevImgName:"grsnopv",prevImgType:".png"};e.grsAlbums.push(i),e.grsAlbums=angular.copy(e.grsAlbums),e.grsAlbAction="addAlbum",t.grsMassage="Album successfully saved",t.grsMassageMood="success"}else t.grsMassage=""==r.error?"Error something went wrong":r.error,t.grsMassageMood="error";t.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}},e.saveAlb=function(){var t=angular.element(jQuery(".grsGallHeader")).scope();if(t.grsLoading)t.wmassage();else if(e.selAlbExists()){var a={action:"grsGalleryAjax",grsAction:"addUpdateAlbum",album:e.grsSelectedAlbum,grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,a,n){if(t.grsLoading=!1,void 0===r.error){for(var s=0;s<e.grsAlbums.length;s++)e.grsAlbums[s].id==e.grsSelectedAlbum.id&&(e.grsSelectedAlbum.title=r.success[0],e.grsAlbums[s]=e.grsSelectedAlbum,e.updateAlbsContents(e.grsSelectedAlbum.id,r.success[0],"alb"));t.grsMassage="Album successfully saved",t.grsMassageMood="success"}else t.grsMassage=""==r.error?"Error something went wrong":r.error,t.grsMassageMood="error";t.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}},e.grsDeleteAlbumPr=function(r,o){void 0!==r&&r.stopPropagation();var t=angular.element(jQuery(".grsGallConfirmMC")).scope(),a=jQuery(r.target).offset().left-jQuery(".grsGallFCont").offset().left,n=jQuery(r.target).offset().top-jQuery(".grsGallFCont").offset().top;t.options.left=a,t.options.top=n+25,t.options.actCnt=".grsGallContent","SPAN"==r.target.nodeName?(t.options.grsConMess="Are you sure , you want to delete ",t.options.grsConIt=e.grsAlbums[o].title,t.options.grsConTp=" album ?",t.options.actF="grsDeleteAlbum",t.options.actP.push(o)):(t.options.grsConMess="Are you sure , you want to delete selected albums ?",t.options.actF="grsDeleteAlbums",t.options.actP.push("")),t.options.show=!0},e.grsDeleteAlbum=function(r){var o=[],t=e.pageination;o.push(t.pagedItems[t.currentPage][r].id),e.deleteAlbums(o)},e.grsDeleteAlbums=function(){for(var r=[],o=e.pageination,t=0;t<o.pagedItems[o.currentPage].length;t++)o.pagedItems[o.currentPage][t].checked&&r.push(o.pagedItems[o.currentPage][t].id);r.length>0&&e.deleteAlbums(r)},e.deleteAlbums=function(t){var a=angular.element(jQuery(".grsGallHeader")).scope();if(a.grsLoading)a.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"deleteAlbum",ids:t,grsAjaxNonce:grsAjaxNonce};a.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,n,s,i){if(o.log(r),a.grsLoading=!1,void 0===r.error){void 0!==e.grsSelectedAlbum&&-1!==jQuery.inArray(e.grsSelectedAlbum.id,t)&&(e.grsSelectedAlbum={}),o.log(e.grsAlbums),o.log(t);for(g=0;g<t.length;g++)for(var l=0;l<e.grsAlbums.length;l++)e.grsAlbums[l].id==t[g]&&e.grsAlbums.splice(l,1);for(var g=0;g<t.length;g++)e.delAlbsContsFromPrnt(t[g],"alb");a.grsMassage="Albums successfully deleted",a.grsMassageMood="success"}else a.grsMassage=(r.error="")?"Error something went wrong":r.error,a.grsMassageMood="error";a.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}},e.grsAddGalleryForAlbum=function(r){e.grsAddContentForAlbum("gal",e.grsGalleriesForAlb[r])},e.grsAddAlbumForAlbum=function(r){e.grsAddContentForAlbum("alb",e.grsAlbums[r])},e.grsAddContentForAlbum=function(t,a){var n=angular.element(jQuery(".grsGallHeader")).scope();if(n.grsLoading)n.wmassage();else if("gal"==t||"alb"==t){var s={action:"grsGalleryAjax",grsAction:"addContentForAlbum",albId:e.grsSelectedAlbum.id,type:t,contentId:a.id,grsAjaxNonce:grsAjaxNonce};n.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,s,i){if(n.grsLoading=!1,void 0===r.error){var l={};l.albId=e.grsSelectedAlbum.id,l.type=t,l.contentId=a.id,l.id=r.success,l.description=a.description,l.title=a.title,l.prevImgName=a.prevImgName,l.prevImgPath=a.prevImgPath,l.prevImgType=a.prevImgType,e.grsSelectedAlbum.content.push(l),e.grsAlbAction="addAlbContent",e.grsAlbums=angular.copy(e.grsAlbums),n.grsMassage="Album successfully saved",n.grsMassageMood="success"}else n.grsMassage=r.error,n.grsMassageMood="error";n.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}else o.log("error, undefined type")},e.grsDeleteAlbumContent=function(t){var a=angular.element(jQuery(".grsGallHeader")).scope();if(a.grsLoading)a.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"deleteContentFromAlbum",id:e.grsSelectedAlbum.content[t].id,grsAjaxNonce:grsAjaxNonce};a.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,n,s){a.grsLoading=!1,void 0===r.error?(e.grsSelectedAlbum.content.splice(t,1),a.grsMassage="successfully deleted",a.grsMassageMood="success"):(a.grsMassage=(r.error="")?"Error something went wrong":r.error,a.grsMassageMood="error"),a.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}},e.delAlbsContsFromPrnt=function(r,o){for(var t=0;t<e.grsAlbums.length;t++)for(var a=0;a<e.grsAlbums[t].content.length;a++)e.grsAlbums[t].content[a].contentId==r&&e.grsAlbums[t].content[a].type==o&&e.grsAlbums[t].content.splice(a,1);e.grsAlbAction="deleteAlbum",e.grsAlbums=angular.copy(e.grsAlbums)},e.updateAlbsContents=function(r,o,t){for(var a=0;a<e.grsAlbums.length;a++)for(var n=0;n<e.grsAlbums[a].content.length;n++)e.grsAlbums[a].content[n].contentId==r&&e.grsAlbums[a].content[n].type==t&&(e.grsAlbums[a].content[n].title=o,e.grsSelectedAlbum&&e.grsAlbums[a].id==e.grsSelectedAlbum.id&&(e.grsSelectedAlbum.content[n].title=o));e.grsAlbums=angular.copy(e.grsAlbums)},e.activeAPw=function(){if(e.selAlbExists()){var r=angular.element(jQuery(".grsGallUpl")).scope(),o=angular.element(jQuery(".grsGallHeader")).scope();r.options.show||o.selectTab("Upl"),r.options.addAction="addPwAIm",r.options.addImages=!1,r.options.addImageTitle="Add album preview image"}},e.selAlbExists=function(){if(void 0===e.grsSelectedAlbum){var r=angular.element(jQuery(".grsGallHeader")).scope();return r.grsMassage="Select album",r.grsMassageMood="error",r.massage(),!1}return!0},e.addPvIm=function(r,t,a){for(var n=0;n<e.grsAlbums.length;n++)if(e.grsAlbums[n].id==e.grsSelectedAlbum.id){e.grsSelectedAlbum.prevImgName=t,e.grsSelectedAlbum.prevImgPath=r,e.grsSelectedAlbum.prevImgType=a,e.grsSelectedAlbum.pvAlbIm=o.uploaderUrl+r+"thumbnail/"+t+a,e.grsSelectedAlbum.hidePvIm=!0,e.grsAlbums[n]=e.grsSelectedAlbum;break}},e.getPrevImg=function(r){var t=e.pageination;if(void 0!==t.pagedItems[t.currentPage]&&void 0!==t.pagedItems[t.currentPage][r]){var a=t.pagedItems[t.currentPage][r];return("grsnopv"==a.prevImgName?o.imagesDir:o.uploaderUrl)+a.prevImgPath+"thumbnail/"+a.prevImgName+a.prevImgType}}}}}]),grsApp.directive("grsSettings",["$filter","$http","GrsAdminService",function(e,r,o){return{restrict:"E",transclude:!0,scope:!1,templateUrl:o.getViewsTemplateUrl("grsSettings"),link:function(e,t,a){e.data={},e.config=grsConfig,e.checkTDis=function(){return!e.config.comments},e.checkFilmDis=function(){return!e.config.filmstrip},e.checkEDis=function(){return!e.config.effects},e.getSettings=function(){var t=angular.element(jQuery(".grsGallHeader")).scope(),a={action:"grsGalleryAjax",grsAction:"getSettings",grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,a,n,s){o.log(r),t.grsLoading=!1,void 0===r.error?e.data=r.success:(t.grsMassage=""==r.error?"Unable to get settings data":r.error,t.grsMassageMood="error",t.massage())}).error(function(e,r){o.log("errr"),t.grsLoading=!1,t.grsMassage="Unable to get settings data",t.grsMassageMood="error",t.massage(!1),401==r&&o.log(e)})},e.getSettings(),e.saveSett=function(){var t=angular.element(jQuery(".grsGallHeader")).scope();if(t.grsLoading)t.wmassage();else{var a={action:"grsGalleryAjax",grsAction:"saveSettings",settings:e.data.settings,grsAjaxNonce:grsAjaxNonce};t.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,r,a,n){t.grsLoading=!1,o.log(e),void 0===e.error?(t.grsMassage="Settings successfully saved",t.grsMassageMood="success"):(t.grsMassage=""==e.error?"Error something went wrong":e.error,t.grsMassageMood="error"),t.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}},e.uninstallPr=function(e,r){void 0!==e&&e.stopPropagation();var o=angular.element(jQuery(".grsGallConfirmMC")).scope(),t=jQuery(e.target).offset().left-jQuery(".grsGallFCont").offset().left,a=jQuery(e.target).offset().top-jQuery(".grsGallFCont").offset().top;o.options.left=t-209,o.options.width="209px",o.options.top=a+30,o.options.actCnt=".grsGallContent",o.options.grsConMess="The following Database Tables will be deleted:",o.options.grsConMessCont="_limb_gallery_galleries, _limb_gallery_galleriescontent, _limb_gallery_settings, _limb_gallery_themes, _limb_gallery_comments, _limb_gallery_albumscontent, _limb_gallery_albums",o.options.grsConMessFoot="Are you sure , you want to uninstall this plugin ?",o.options.br=!0,o.options.actF="uninstall",o.options.actP.push(""),o.options.show=!0},e.uninstall=function(){var e=angular.element(jQuery(".grsGallHeader")).scope();if(e.grsLoading)e.wmassage();else{var t={action:"grsGalleryAjax",grsAction:"uninstall",grsAjaxNonce:grsAjaxNonce};e.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,t,a,n){e.grsLoading=!1,o.log(r),void 0!==r.success?(e.grsMassage=1==r.success?"Plugin uninstalled":r.success,e.grsMassageMood="error"):(e.grsMassage=""==r.error?"Error something went wrong":r.error,e.grsMassageMood="error"),e.massage()}).error(function(e,r){o.log("errr"),401==r&&o.log(e)})}}}}}]),grsApp.directive("grsPageNav",["$filter","GrsAdminService",function(e,r){return{restrict:"E",transclude:!0,scope:{pageInation:"="},templateUrl:r.getViewsTemplateUrl("grsPageNav"),link:function(r,o,t){r.order="id",r.reverse=!0;var a=function(e,r){return!r||-1!==e.toLowerCase().indexOf(r.toLowerCase())};r.pageInation.search=function(){r.pageInation.filteredItems=e("filter")(r.pageInation.items,function(e){e.id=parseInt(e.id);for(var o in e)if("title"==o&&a(e[o],r.query))return!0;return!1}),r.pageInation.filteredItems=e("orderBy")(r.pageInation.filteredItems,r.order,r.reverse),r.pageInation.groupToPages()},r.pageInation.groupToPages=function(){r.pageInation.pagedItems=[];for(var e=0;e<r.pageInation.filteredItems.length;e++)e%r.pageInation.itemsPerPage==0?r.pageInation.pagedItems[Math.floor(e/r.pageInation.itemsPerPage)]=[r.pageInation.filteredItems[e]]:r.pageInation.pagedItems[Math.floor(e/r.pageInation.itemsPerPage)].push(r.pageInation.filteredItems[e])},r.pageInation.range=function(e,r){var o=[];r||(r=e,e=0);for(var t=e;t<r;t++)o.push(t);return o},r.pageInation.prevPage=function(e){void 0!==e&&e.stopPropagation(),r.pageInation.currentPage>0&&r.pageInation.currentPage--},r.pageInation.nextPage=function(e){void 0!==e&&e.stopPropagation(),r.pageInation.currentPage<r.pageInation.pagedItems.length-1&&r.pageInation.currentPage++},r.pageInation.lastPage=function(e){void 0!==e&&e.stopPropagation(),r.pageInation.currentPage<r.pageInation.pagedItems.length-1&&(r.pageInation.currentPage=r.pageInation.pagedItems.length-1)},r.pageInation.firstPage=function(e){void 0!==e&&e.stopPropagation(),r.pageInation.currentPage>0&&(r.pageInation.currentPage=0)},r.setPage=function(e){void 0!==e&&e.stopPropagation(),r.pageInation.currentPage=this.n},r.pageInation.search()}}}]),grsApp.controller("grsUploader",["$scope","$filter","$log","GrsAdminService",function(e,r,o,t){}]),grsApp.directive("grsUploader",["$filter","$http","$timeout","GrsAdminService",function(e,r,o,t){return{restrict:"E",transclude:!0,scope:!1,templateUrl:t.getViewsTemplateUrl("grsUploader"),link:function(a,n,s){a.sortingOrder="id",a.reverse=!1,a.filteredItems=[],a.groupedItems=[],a.pageSize=5,a.itemsPerPage=a.pageSize,a.pagedItems=[],a.currentPage=0,a.curentDirIndex=0,a.parentDirIndex=-1,a.mainItems=[],a.dirsData=[],a.items=[],a.itemsLength=function(){return a.items.length},a.options={show:!1,addImage:!1,addImages:!1,delImages:!1,addAction:"",addImageTitle:"Add",activeTab:""},a.activeTab=function(e){switch(e){case"Gall":a.options.addImage=!0,a.options.addImages=!0,a.options.addAction="addImages",a.options.activeTab="Gall";break;case"Alb":a.options.addImage=!0,a.options.addImages=!1,a.options.addAction="addPwAIm",a.options.addImageTitle="Add album preview image",a.options.activeTab="Alb";break;case"Theme":a.options.addImage=!1,a.options.addImages=!1,a.options.addAction="",a.options.activeTab="Theme";case"Sett":a.options.addImage=!1,a.options.addImages=!1,a.options.addAction="",a.options.activeTab="Sett"}},a.$watch("currentPage",function(){a.unSelectAll()}),a.closeUpl=function(){a.options.show=!1},a.dirs=[],a.dirs.push({dirname:"limb-gallery",dirindex:0}),a.getItems=function(){var e=angular.element(jQuery(".grsGallHeader")).scope(),o={action:"grsGalleryAjax",grsAction:"getUploderItems",grsAjaxNonce:grsAjaxNonce};e.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(o),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,t,n){e.grsLoading=!1,angular.isUndefined(r.error)?(a.dirsData=r.success,a.changeDir(0)):(e.grsMassage=""===r.error?"Unable to get uploader data":r.error,e.grsMassageMood="error",e.massage())}).error(function(r,o){t.log("errr"),e.grsLoading=!1,e.grsMassage="Unable to get uploader data",e.grsMassageMood="error",e.massage(!1),401==o&&t.log(r)})},a.getItems(),a.upload=function(e){e.preventDefault(),n.find("#upload #grsUpload").click()},a.uplLsrc=function(){return t.imagesDir+"admin/ring-alt-u.svg"},a.uploadInProgress=function(e){if(angular.isUndefined(a.pagedItems[a.currentPage]))return!1;for(var r=0;r<a.pagedItems[a.currentPage].length;r++)if(!angular.isUndefined(a.pagedItems[a.currentPage][r].canAdd)&&!a.pagedItems[a.currentPage][r].canAdd)return!0;return!1},a.changeDir=function(e,r){if(a.uploadInProgress()){var o=angular.element(jQuery(".grsGallHeader")).scope();return o.grsMassage="Wait while image is being uploaded",o.grsMassageMood="error",void o.massage()}if(angular.isUndefined(r)||(r.stopPropagation(),r.preventDefault()),-1!=e&&""!==e){a.unSelectAll();for(c=0;c<a.dirsData.length;c++)if(a.dirsData[c].curentDirIndex==e){var t=a.dirsData[c];a.items=t.items;break}a.parentDirIndex=t.parentDirIndex,a.curentDirIndex=e,a.parentDirPath=t.path;var n=a.parentDirPath.split("/");n=n[n.length-2];for(var s=0,i=[],l=0;l<a.dirs.length;l++)parseInt(a.dirs[l].dirindex)>parseInt(e)?i.push(a.dirs[l].dirindex):parseInt(a.dirs[l].dirindex)<parseInt(e)&&s++;for(var g=0;g<i.length;g++)for(var c=0;c<a.dirs.length;c++)if(a.dirs[c].dirindex==i[g]){a.dirs.splice(c,1);break}s==l&&a.dirs.push({dirname:n,dirindex:e}),a.search()}},a.back=function(){a.changeDir(a.parentDirIndex)},a.changeMode=function(e){if(-1!=a.options.modes.indexOf(e)){for(var r=0;r<a.buttons.header.length;r++){var o=a.buttons.header[r].activeIn.indexOf(e);a.buttons.header[r].printC=-1!=o?a.buttons.header[r].activeC:a.buttons.header[r].deActiveC,a.buttons.header[r].active=-1!=o}a.options.activeMode=e}else t.log("no such mode")},a.addItem=function(e,r,o,t,n,s,i){s&&a.dirsData.push({curentDirIndex:n,parentDirIndex:a.curentDirIndex,path:a.parentDirPath+r+"/",items:[]}),a.items.splice(0,0,{key:e,name:r,dirPath:o,path:t,dirIndex:n,isDir:s,ext:i,canAdd:!!s}),a.search(),a.pageSize++,a.itemsPerPage=a.pageSize,a.firstPage()},a.addFolder=function(e){e.preventDefault();var o=angular.element(jQuery(".grsGallHeader")).scope();if(o.grsLoading)o.wmassage();else{var n={action:"grsGalleryAjax",grsAction:"addFolderInUploader",parentDirPath:a.parentDirPath,_method:"ADDFOLDER",grsAjaxNonce:grsAjaxNonce};key=a.itemsLength(),path=t.imagesDir+"admin/folder.png",dirIndex=a.dirsData.length,isDir=!0,o.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,r,n,s){t.log(e),o.grsLoading=!1;var i=Object.keys(e)[0];void 0===e.error&&e[i]?(a.addItem(key,i,a.parentDirPath+i,path,dirIndex,isDir,""),o.grsMassage="Folder successfully created",o.grsMassageMood="success"):(o.grsMassage=""==e.error?"Error something went wrong":e.error,o.grsMassageMood="error"),o.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},a.select=function(e,r){r.preventDefault(),r.stopPropagation();var o=a.pagedItems[a.currentPage][e];o.select=!o.select},a.isAllSelected=function(){return void 0!==a.pagedItems[a.currentPage]&&a.pagedItems[a.currentPage].every(function(e){return e.select})},a.isSingleSelExist=function(){if(void 0!==a.pagedItems[a.currentPage])for(var e=0;e<a.pagedItems[a.currentPage].length;e++)if(a.pagedItems[a.currentPage][e].select)return!0;return!1},a.isSingleImgSelExist=function(){if(void 0!==a.pagedItems[a.currentPage])for(var e=0;e<a.pagedItems[a.currentPage].length;e++)if(a.pagedItems[a.currentPage][e].select&&!a.pagedItems[a.currentPage][e].isDir)return!0;return!1},a.checkAddImgC=function(e){return a.options.addImages&&a.isSingleImgSelExist()},a.selectAll=function(e){var r=!a.isAllSelected();angular.forEach(a.pagedItems[a.currentPage],function(e){e.select=r})},a.unSelectAll=function(){angular.forEach(a.pagedItems[a.currentPage],function(e){e.select=!1})},a.grsDeleteUpImgPr=function(e,r){void 0!==e&&e.stopPropagation();var o=angular.element(jQuery(".grsGallConfirmMC")).scope(),t=jQuery(e.target).offset().left-jQuery(".grsGallFCont").offset().left,n=jQuery(e.target).offset().top-jQuery(".grsGallFCont").offset().top;if(o.options.left=t,o.options.top=n+25,o.options.actCnt=".grsGallUpl","grsGallUplImgD"==e.target.className)o.options.grsConMess="Are you sure , you want to delete ",o.options.grsConIt=a.pagedItems[a.currentPage][r].name,o.options.grsConTp=a.pagedItems[a.currentPage][r].isDir?" folder ?":" image ?",o.options.actF="deleteImg",o.options.actP.push(r);else{if(!a.isSingleSelExist()){var s=angular.element(jQuery(".grsGallHeader")).scope();return s.grsMassage="Select atlist one item",s.grsMassageMood="success",void s.massage()}o.options.grsConMess="Are you sure , you want to delete selected items ?",o.options.actF="deleteImgs",o.options.actP.push("")}o.options.show=!0},a.deleteImg=function(e){var n=angular.element(jQuery(".grsGallHeader")).scope();if(n.grsLoading)n.wmassage();else{var s=a.pagedItems[a.currentPage][e],i=a.itemsPerPage*a.currentPage+parseInt(e);grsAction="delItemsFromUploader",files=[],files[0]=s.name+(s.isDir?"":s.ext);var l={action:"grsGalleryAjax",grsAction:grsAction,_method:"DELETE",parentDirPath:a.parentDirPath,files:files,grsAjaxNonce:grsAjaxNonce};n.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(l),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,s,l,g){n.grsLoading=!1,t.log(r),void 0===r.error?(a.deleteItemsInContent(r),a.pagedItems[a.currentPage][e].delete=!0,o(function(){a.items.splice(i,1),a.search()},500),n.grsMassage="Item successfully deleted",n.grsMassageMood="success"):(n.grsMassage=r.error,n.grsMassageMood="error"),n.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},a.deleteImgs=function(){var e=angular.element(jQuery(".grsGallHeader")).scope();if(e.grsLoading)e.wmassage();else{var n=[],s=[],i=[];angular.forEach(a.pagedItems[a.currentPage],function(e){if(e.select){var r=e.name+(e.isDir?"":e.ext);n.push(r),s.push(e.name),i.push(e)}});var l={action:"grsGalleryAjax",grsAction:"delItemsFromUploader",_method:"DELETE",parentDirPath:a.parentDirPath,files:n,grsAjaxNonce:grsAjaxNonce};e.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(l),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,n,l,g){if(e.grsLoading=!1,t.log(r),void 0===r.error){a.deleteItemsInContent(r);for(var c=0;c<i.length;c++)i[c].delete=!0;o(function(){for(var e=0;e<s.length;e++)for(var r=0;r<a.items.length;r++)a.items[r].name==s[e]&&a.items.splice(r,1);a.search()},500),e.grsMassage="Items successfully deleted",e.grsMassageMood="success"}else e.grsMassage=r.error,e.grsMassageMood="error";e.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},a.deleteItemsInContent=function(e){var r=angular.element(jQuery(".grsGallContent")).scope();if(e.length>0){for(var o=0;o<e.length;o++){for(n=0;n<r.galleriesData.length;n++){for(var t=0;t<r.galleriesData[n].images.length;t++){var a=r.galleriesData[n].images[t];void 0!==e[o].name&&a.name==e[o].name&&a.path==e[o].path&&e[o].success&&r.galleriesData[n].images.splice(t,1)}void 0!==e[o].name&&r.galleriesData[n].prevImgName==e[o].name&&r.galleriesData[n].prevImgPath==e[o].path&&e[o].success&&(r.galleriesData[n].prevImgName="grsnopv",r.galleriesData[n].prevImgPath="",r.galleriesData[n].prevImgType=".png"),void 0!==r.selGall&&r.selGall.id==r.galleriesData[n].id&&r.changeGallery(r.galleriesData[n].id)}for(var n=0;n<r.grsAlbums.length;n++)void 0!==e[o].name&&r.grsAlbums[n].prevImgName==e[o].name&&r.grsAlbums[n].prevImgPath==e[o].path&&e[o].success&&(r.grsAlbums[n].prevImgName="grsnopv",r.grsAlbums[n].prevImgPath="",r.grsAlbums[n].prevImgType=".png"),void 0!==r.grsSelectedAlbum&&r.grsSelectedAlbum.id==r.grsAlbums[n].id&&r.grsChangeAlbum(n)}r.$$phase||r.$apply()}},a.showIn=function(e,r){a.pagedItems[a.currentPage][e].rename=!0,a.pagedItems[a.currentPage][e].lastName=a.pagedItems[a.currentPage][e].name,r.preventDefault(),r.stopPropagation()},a.rename=function(e){var o=angular.element(jQuery(".grsGallHeader")).scope(),n=!1,s=a.pagedItems[a.currentPage][e];if(o.grsLoading)o.wmassage();else{if(-1!=s.name.indexOf('"')?(o.grsMassage="A file name can't contain this (\") carachter",n=!0):""==s.name&&(o.grsMassage="A file name can't be empty",n=!0),n)return s.name=s.lastName,o.grsMassageMood="error",void o.massage();a.itemsPerPage,a.currentPage,parseInt(e);grsAction="renameItemInUploader",data={action:"grsGalleryAjax",grsAction:grsAction,parentDirPath:a.parentDirPath,_method:"RENAME",itemNewName:s.name+s.ext,itemName:s.lastName+s.ext,grsAjaxNonce:grsAjaxNonce},o.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(data),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,r,t,n){o.grsLoading=!1,void 0!==e.success&&e.success?(a.renameItem(e.old_name,e.new_name),s.rename=!1,o.grsMassage="Item successfully renamed",o.grsMassageMood="success"):(o.grsMassage=e.error,o.grsMassageMood="error",s.name=s.lastName,s.rename=!1),o.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},a.renameItem=function(e,r){function o(e,s){s+=1;for(var i=0;i<a.dirsData.length;i++)if(a.dirsData[i].curentDirIndex==e)for(var l=0;l<a.dirsData[i].items.length;l++)if(a.dirsData[i].items[l].isDir){curDirIndex=a.dirsData[i].items[l].dirIndex;for(var g=0;g<a.dirsData.length;g++)if(a.dirsData[g].curentDirIndex==curDirIndex){var c=a.dirsData[g].path;(c=c.split("/"))[c.length-s]=r,a.dirsData[g].path=c.join("/"),o(curDirIndex,s);break}}else{var u=(c=a.dirsData[i].items[l].path).split(t.uploaderUrl+a.parentDirPath),d=a.dirsData[i].items[l].name+a.dirsData[i].items[l].ext,m={};t.log(c),t.log(a.parentDirPath),(c=c.split("/"))[c.length-s]=r,a.dirsData[i].items[l].path=c.join("/");var p=c.join("/").split(t.uploaderUrl+a.parentDirPath);m.name=a.dirsData[i].items[l].name,m.oldPath=u[1].replace("/thumbnail","").replace(d,""),m.newPath=p[1].replace("/thumbnail","").replace(d,""),n.push(m)}}for(var n=[],s=0;s<a.items.length;s++)if(e===a.items[s].lastName){if(a.items[s].name=r,a.items[s].isDir){for(var i=a.items[s].dirIndex,l=0;l<a.dirsData.length;l++)if(a.dirsData[l].curentDirIndex==i){(g=(g=a.dirsData[l].path).split("/"))[g.length-2]=r,a.dirsData[l].path=g.join("/");break}o(i,2)}else{var g=a.items[s].path,c={};c.newName=r,c.oldName=a.items[s].lastName,c.path=a.parentDirPath,n.push(c),(g=g.split("/"))[g.length-1]=r,a.items[s].path=g.join("/")+a.items[s].ext}a.renameItemsInContent(n);break}},a.renameItemsInContent=function(e){var r=angular.element(jQuery(".grsGallContent")).scope();if(e.length>0){for(var o=0;o<e.length;o++){for(n=0;n<r.galleriesData.length;n++){for(var t=0;t<r.galleriesData[n].images.length;t++){var a=r.galleriesData[n].images[t];void 0!==e[o].newName?a.name==e[o].oldName&&a.path==e[o].path&&(a.name=e[o].newName):void 0!==e[o].newPath&&a.path==e[o].oldPath&&a.name==e[o].name&&(a.path=e[o].newPath)}void 0!==e[o].newName?r.galleriesData[n].prevImgName==e[o].oldName&&r.galleriesData[n].prevImgPath==e[o].path&&(r.galleriesData[n].prevImgName=e[o].newName):void 0!==e[o].newPath&&r.galleriesData[n].prevImgPath==e[o].oldPath&&r.galleriesData[n].prevImgName==e[o].name&&(r.galleriesData[n].prevImgPath=e[o].newPath)}for(var n=0;n<r.grsAlbums.length;n++)void 0!==e[o].newName?r.grsAlbums[n].prevImgName==e[o].oldName&&r.grsAlbums[n].prevImgPath==e[o].path&&(r.grsAlbums[n].prevImgName=e[o].newName):void 0!==e[o].newPath&&r.grsAlbums[n].prevImgPath==e[o].oldPath&&r.grsAlbums[n].prevImgName==e[o].name&&(r.grsAlbums[n].prevImgPath=e[o].newPath)}r.$$phase||r.$apply()}},a.addImage=function(e,r){if(r.stopPropagation(),r.preventDefault(),a.options.addImage){var o=a.pagedItems[a.currentPage][e];if(void 0!==o.canAdd&&!o.canAdd){var t=angular.element(jQuery(".grsGallHeader")).scope();return t.grsMassage="Wait while image is being uploaded",t.grsMassageMood="error",void t.massage()}o.select=!1;var s=[],i=[],l=[],g=[],c=document.querySelector("#grsImageKey"+o.key+" .grsGallUplImg"),u={nW:c.naturalWidth,nH:c.naturalHeight};s.push(o.name),i.push(o.ext),l.push(n.find("#grsImageKey"+o.key)),g.push(u),a.addSave(s,i,l,g)}},a.addImages=function(){var e=angular.element(jQuery(".grsGallHeader")).scope();if(!a.isSingleImgSelExist())return e.grsMassage="Select atlist one image",e.grsMassageMood="success",void e.massage();if(!a.options.addImages)return e.grsMassage='Select gallery or press "Add images" button from gallery cont',e.grsMassageMood="success",void e.massage();var r=[],o=[],t=[],s=!1,i=!1,l=[];if(angular.forEach(a.pagedItems[a.currentPage],function(e){if(e.select){if(e.isDir)return void(s=!0);if(void 0!==e.canAdd&&!e.canAdd)return void(i=!0);e.select=!1,imDomS=document.querySelector("#grsImageKey"+e.key+" .grsGallUplImg"),nRob={nW:imDomS.naturalWidth,nH:imDomS.naturalHeight},r.push(e.name),o.push(e.ext),t.push(n.find("#grsImageKey"+e.key)),l.push(nRob)}}),s&&(e.grsMassage="Adding folder not allowed yet",e.grsMassageMood="success",e.massage()),i)return(e=angular.element(jQuery(".grsGallHeader")).scope()).grsMassage="Wait while image is being uploaded",e.grsMassageMood="error",void e.massage();r.length>0&&a.addSave(r,o,t,l)},a.addSave=function(e,o,n,s){var i=angular.element(jQuery(".grsGallHeader")).scope();if(i.grsLoading)i.wmassage();else{var l=[],g=[],c=[],u=jQuery(".grsGallContent"),d=angular.element(u).scope(),m=d.getMinOrder();u.removeClass("grsAnDur grsFadeIn"),grsAction=a.options.addAction;for(var p=0;p<e.length;p++){var f=e[p],h=o[p],v=n[p],C=s[p];switch(grsAction){case"addImages":grsId=d.selGall.id;var b=--m;if(c.push(b),d.selGall.imagesCount=d.selGall.imagesCount?parseInt(d.selGall.imagesCount)+1:1,g.push(d.selGall.imagesCount),d.addItem(f,f,"",a.parentDirPath,"",b,h,"","",d.selGall.imagesCount,null),grsGFImC=u.find(".grsGallCoGaImsC"),jQuery(".grsGallCoGaC").removeClass("grsAnDur grsSlideInRight"),C.nW/C.nH>1)var y=C.nW>228?228:C.nW,A=C.nH*y/C.nW;else var A=C.nH>166?166:C.nH,y=C.nW*A/C.nH;var I=9+grsGFImC.offset().left+(228-y)/2-v.offset().left,k=0+grsGFImC.offset().top+(166-A)/2-v.offset().top;break;case"addGPvIm":if(grsId=d.selGall.id,d.addGPvIm(a.parentDirPath,f,h),jQuery(".grsGallCoGaC").removeClass("grsAnDur grsSlideInRight"),C.nW/C.nH>1)var y=C.nW>81?81:C.nW,A=C.nH*y/C.nW;else var A=C.nH>81?81:C.nH,y=C.nW*A/C.nH;var I=u.find(".grsGallCoGaInPic").offset().left+(81-y)/2-v.offset().left,k=u.find(".grsGallCoGaInPic").offset().top+(81-A)/2-v.offset().top;break;case"addPwAIm":if(grsId=d.grsSelectedAlbum.id,d.addPvIm(a.parentDirPath,f,h),jQuery(".grsGallCoAlbC").removeClass("grsAnDur grsSlideInLeft"),C.nW/C.nH>1)var y=C.nW>81?81:C.nW,A=C.nH*y/C.nW;else var A=C.nH>81?81:C.nH,y=C.nW*A/C.nH;var I=u.find(".grsGallCoAlbPic").offset().left+(81-y)/2-v.offset().left,k=u.find(".grsGallCoAlbPic").offset().top+(81-A)/2-v.offset().top}var w=v.find("img");l[p]=w.clone();var B=w.offset().left-v.offset().left,x=w.offset().top-v.offset().top;l[p].appendTo(v),l[p].attr("style","position: absolute;opacity: 0.3 !important;z-index: 100;width: "+w.width()+"px;height: "+w.height()+"px;left: "+B+"px;top: "+x+"px;"),l[p].animate({opacity:1,left:I,top:k,width:y,height:A},600,function(e){return function(){switch(grsAction){case"addImages":for(var r=0;r<d.items.length;r++)d.items[r].key==g[e]&&(d.items[r].hide=!1,d.$apply());break;case"addGPvIm":d.selGall.hidePvIm=!1,d.$apply();break;case"addPwAIm":d.grsSelectedAlbum.hidePvIm=!1,d.$apply()}}}(p)),function(e){setTimeout(function(){e.remove()},600)}(l[p])}var T={action:"grsGalleryAjax",grsAction:grsAction,grsId:grsId,files:e,types:o,orders:c,parentDirPath:a.parentDirPath,grsAjaxNonce:grsAjaxNonce};i.grsLoading=!0,r({method:"POST",url:grsAdminAjax,data:jQuery.param(T),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,r,o,t){if(i.grsLoading=!1,"success"===Object.keys(e)[0]){switch(grsAction){case"addImages":i.grsMassage="Images successfully added",d.addIdsToScopes(g,e.success);break;case"addGPvIm":a.options.addImage=!0,a.options.addImages=!0,a.options.addAction="addImages",a.options.addImageTitle="Add",i.grsMassage="Preview image updated";break;case"addPwAIm":i.grsMassage="Preview image updated"}i.grsMassageMood="success"}else i.grsMassage=e.error,i.grsMassageMood="error";i.massage()}).error(function(e,r){t.log("errr"),401==r&&t.log(e)})}},a.getItemByKey=function(e){for(var r=0;r<a.items.length;r++)if(a.items[r].key==e)return a.items[r]},a.removeItemByKey=function(e){for(var r=0;r<a.items.length;r++)a.items[r].key==e&&a.items.splice(r,1);a.search()},a.changeItemsPerPage=function(){a.pageSize=void 0===a.pageSize||null==a.pageSize?1:a.pageSize,a.itemsPerPage=a.pageSize,a.search()};var i=function(e,r){return!r||-1!==e.toLowerCase().indexOf(r.toLowerCase())};a.search=function(){a.filteredItems=e("filter")(a.items,function(e){for(var r in e)if("name"==r&&i(e[r],a.query))return!0;return!1}),a.currentPage=0,a.groupToPages()},a.groupToPages=function(){a.pagedItems=[];for(var e=0;e<a.filteredItems.length;e++)e%a.itemsPerPage==0?a.pagedItems[Math.floor(e/a.itemsPerPage)]=[a.filteredItems[e]]:a.pagedItems[Math.floor(e/a.itemsPerPage)].push(a.filteredItems[e])},a.range=function(e,r){var o=[];r||(r=e,e=0);for(var t=e;t<r;t++)o.push(t);return o},a.prevPage=function(){a.currentPage>0&&a.currentPage--},a.nextPage=function(){a.currentPage<a.pagedItems.length-1&&a.currentPage++},a.lastPage=function(){a.currentPage<a.pagedItems.length-1&&(a.currentPage=a.pagedItems.length-1)},a.firstPage=function(){a.currentPage>0&&(a.currentPage=0)},a.setPage=function(){a.currentPage=this.n},n.find("#upload").fileupload({dropZone:jQuery("#drop"),submit:function(e,r){r.formData={action:"grsGalleryAjax",grsAction:"addImageToUploader",parentDirPath:a.parentDirPath,grsAjaxNonce:grsAjaxNonce}},add:function(e,r){var o=a.itemsLength(),n=r.files[0].name,s=r.files[0].type,i=r.files[0].name.lastIndexOf(".");if("jpeg"===(s=s.split("/"))[1]){l=r.files[0].name.slice(0,i);s=(l=r.files[0].name.split(l))[1]}else if("png"===s[1]){l=r.files[0].name.slice(0,i);s=(l=r.files[0].name.split(l))[1]}else{if("gif"!==s[1])return;var l=r.files[0].name.slice(0,i);s=(l=r.files[0].name.split(l))[1]}n=n.slice(0,i);var g=t.uploaderUrl+a.parentDirPath+"thumbnail/"+n+s;a.addItem(o,n,"",g,"",!1,s),a.$$phase||a.$apply();var c=jQuery("#grsImageKey"+o),u=new FileReader;u.onload=function(e){c.find(".grsGallUplImg").attr("src",e.target.result),c.find(".grsGallUplImgLdSC > input").knob(),c.find(".grsGallUplImgLdSC > input").css("display","inline-block;")},u.readAsDataURL(r.files[0]),r.context=c;r.submit()},start:function(e){jQuery(".grsGallUplProgress").css("display","block")},progress:function(e,r){var o=parseInt(r.loaded/r.total*100,10);r.context.find("input").val(o).change()},stop:function(e){jQuery(".grsGallUplProgress").hide(),jQuery(".grsGallUplProgress .grsGallUplProgressB").css("width",0)},progressall:function(e,r){var o=parseInt(r.loaded/r.total*100,10)+"%";jQuery(".grsGallUplProgress .grsGallUplProgressB").css("width",o).text(o)},fail:function(e,r){r.context.addClass("error")},chunkfail:function(e,r){r.context.addClass("error")},done:function(e,r){var n=r.context.selector.split("grsImageKey"),s=Array.isArray(n)?n[1]:-1,i=JSON.parse(r.result),l=a.getItemByKey(s);if(0==i||void 0!==i.error){t.log(i);var g=angular.element(jQuery(".grsGallHeader")).scope();return void 0!==i.error&&(g.grsMassage=i.error),0==i&&(g.grsMassage="Highlighted items upload failed, check your server post max size"),g.grsMassageMood="error",g.massage(),r.context.addClass("grsUplError"),o(function(){a.removeItemByKey(s)},4500),void r.context.find(".grsGallUplImgLdC").addClass("grsDisplayNone")}void 0!==i.files&&(l.name=i.files[0].name.slice(0,-l.ext.length),l.path=t.uploaderUrl+a.parentDirPath+"thumbnail/"+l.name+l.ext),l.canAdd=!0,r.context.addClass("grsUplCompl"),r.context.find(".grsGallUplImgLdC").addClass("grsDisplayNone"),r.context.find(".grsGallUplImgAcC").removeClass("grsDisplayNone"),r.context.find("img").css("opacity",1),r.context.find("img").attr("src",l.path),a.$$phase||a.$apply()},always:function(e,r){},url:grsAdminAjax}),jQuery(document).on("drop dragover",function(e){e.preventDefault()})}}}]),grsApp.controller("grsGallHeader",["$scope","$filter","$log","$http","$timeout","$window","GrsAdminService",function(e,r,o,t,a,n,s){e.items=[],e.action="",e.selGall={},e.activeTab="",e.showGTs=!1,e.grsLoading=!1,e.galleriesDataIsLoaded=!1,e.grsMassageC=!1,e.grsMassage="",e.grsMassageMood="",e.mTimeOut={text:!0,cont:!0},e.config=grsConfig,e.wmassage=function(){e.grsMassage="Please be patient, try after current request ends",e.grsMassageMood="error",e.massage()},e.massage=function(r,o){e.grsMassageC=!0,r=!!angular.isUndefined(r)||r,o=angular.isUndefined(o)?3e3:o,a.cancel(e.mTimeOut.cont),a.cancel(e.mTimeOut.text),r&&(e.mTimeOut.cont=a(function(){e.grsMassageC=!1},o),e.mTimeOut.text=a(function(){e.grsMassage=""},o+2e3)),e.$$phase||e.$apply()},e.pageination={items:[],currentPage:0,itemsPerPage:4},e.$watch("items",function(){switch(e.pageination.items=angular.copy(e.items),void 0!==e.pageination.search&&e.pageination.search(),e.action){case"addItem":e.pageination.firstPage(),e.selectGallery(0);break;case"deleteItem":angular.isUndefined(e.pageination.pagedItems[e.pageination.currentPage])&&e.pageination.currentPage--}e.action=""}),e.getItems=function(){var r={action:"grsGalleryAjax",grsAction:"getGalleryTItems",grsAjaxNonce:grsAjaxNonce};e.grsLoading=!0,t({method:"POST",url:grsAdminAjax,data:jQuery.param(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,o,t,a){e.grsLoading=!1,void 0===r.error?e.items=r.success:(e.grsMassage=""!=r.error?r.error:"Unable to get galleries data",e.grsMassageMood="error",e.massage())}).error(function(r,o){s.log("errr"),e.grsLoading=!1,e.grsMassage="Unable to get galleries data",e.grsMassageMood="error",e.massage(!1),401==o&&s.log(r)})},e.getItems(),e.selectGallery=function(r,o){angular.isUndefined(o)||o.stopPropagation();var t=e.pageination.pagedItems[e.pageination.currentPage][r],a=t.id,n=angular.element(jQuery(".grsGallContent")).scope();a&&(e.selectTab("Gall"),void 0!==e.selGall.id&&e.selGall.id==a||(e.showGTs=!1,e.selGall=t,n.changeGallery(a),grsActiveCont="Gall"))},e.addItem=function(r,o,t){e.items.push({title:r,description:o,id:t}),e.action="addItem",e.items=angular.copy(e.items)},e.updateItem=function(r){e.selGall.title=r,s.log(e.selGall);for(var o=e.items,t=0;t<o.length;t++)o[t].id==e.selGall.id&&(o[t].title=r);e.action="updateItem",e.items=angular.copy(e.items)},e.deleteGalleryPr=function(r,o){angular.isUndefined(o)||o.stopPropagation();var t=angular.element(jQuery(".grsGallConfirmMC")).scope(),a=jQuery(o.target).offset().left-jQuery(".grsGallFCont").offset().left,n=jQuery(o.target).offset().top-jQuery(".grsGallFCont").offset().top;t.options.show=!0,t.options.left=a,t.options.top=n+25,t.options.grsConMess="Are you sure , you want to delete ",t.options.grsConIt=e.pageination.pagedItems[e.pageination.currentPage][r].title,t.options.grsConTp=" gallery ?",t.options.actCnt=".grsGallHeader",t.options.actF="deleteGallery",t.options.actP.push(r)},e.deleteGallery=function(r){var o=e.pageination.pagedItems[e.pageination.currentPage][r].id,a=e.pageination.itemsPerPage*e.pageination.currentPage+r,n=angular.element(jQuery(".grsGallContent")).scope(),i={action:"grsGalleryAjax",grsAction:"delete",grsGallid:o,grsAjaxNonce:grsAjaxNonce};o&&(e.grsLoading=!0,t({method:"POST",url:grsAdminAjax,data:jQuery.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r,t,i,l){s.log(r),void 0===r.error?(n.deleteGallery(o),e.action="deleteItem",e.items.splice(a,1),e.items=angular.copy(e.items),e.grsMassage="successfully deleted",e.grsMassageMood="success"):(e.grsMassage=r.error,e.grsMassageMood="error"),e.massage(),e.grsLoading=!1}).error(function(e,r){s.log("errr"),401==r&&s.log(e)}))},e.addGallery=function(){var r=angular.element(jQuery(".grsGallContent")).scope();grsActiveCont="Gall",e.selectTab("Gall"),r.changeGallery(0),r.grsSave()},e.showGTsCont=function(r){if(r.preventDefault(),r.stopPropagation(),e.grsLoading||!e.galleriesDataIsLoaded)return e.grsMassage="Please wait until loading ends.",e.grsMassageMood="success",void e.massage();var o=e.items.length;0===o&&(e.grsMassage="There is no gallery , create it from the button left.",e.grsMassageMood="success",e.massage()),e.showGTs=!(e.showGTs||0===o)},e.selectTab=function(r){var o=angular.element(jQuery(".grsGallContent")).scope(),t=angular.element(jQuery(".grsGallUpl")).scope();if("Upl"!==r){if(!e.checkConf(r))return;e.activeTab=r,grsActiveCont=r,o.show=!0,o.showContPart=r,t.activeTab(r)}else t.options.show=!0},e.disTheme=function(){return!e.config.themes},e.shProF=function(){var r=!1;for(f in e.config)if(!e.config[f]){r=!0;break}return r},e.checkConf=function(r){return!("Theme"===r&&!e.config.themes)||(e.grsMassage="You need to install pro version containing themes feature.",e.grsMassageMood="success",e.massage(),!1)},e.checkTooltip=function(){s.setTooltip()},e.$on("winclick::winclick",function(){e.showGTs&&(e.showGTs=!1,e.$$phase||e.$apply())})}]),grsApp.controller("grsConfirmM",["$scope","$filter","$log","$http","$timeout","GrsAdminService",function(e,r,o,t,a,n){e.options={show:!1,grsConMess:"",grsConIt:"",grsConTp:"",left:0,top:0,actCnt:"",actF:"",actP:[]},e.answer=function(r,o){o.stopPropagation(),r&&angular.element(jQuery(e.options.actCnt)).scope()[e.options.actF](e.options.actP[0]),e.options={show:!1,grsConMess:"",grsConIt:"",grsConTp:"",left:0,top:0,actCnt:"",actF:"",actP:[]},n.log(e.options)}}]);